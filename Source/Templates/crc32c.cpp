//---------------------------------------------------------------------------
#include <stddef.h>
#include <stdint.h>
//---------------------------------------------------------------------------
#include "crc32c.h"
//---------------------------------------------------------------------------
#pragma package(smart_init)
//---------------------------------------------------------------------------
uint32_t crc32c::calc(const wchar_t* buf, size_t len, uint32_t crc)
{
    crc = ~crc;
    while (len--) {
        crc ^= *buf++;
        for (auto k = 0; k < 8; k++) {
            crc = crc & 1 ? (crc >> 1) ^ POLY : crc >> 1;
        }
    }
    return ~crc;
}
//---------------------------------------------------------------------------
